module.exports=function(n){function e(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return n[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var t={};return e.m=n,e.c=t,e.i=function(n){return n},e.d=function(n,t,o){e.o(n,t)||Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:o})},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},e.p="",e(e.s=8)}([function(n,e){n.exports=require("mongoose")},function(n,e,t){"use strict";function o(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function n(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}(),r=t(3),u=function(n){return n&&n.__esModule?n:{default:n}}(r),c=function(){function n(){o(this,n),this.validIP=function(n){return!!n},this.validURL=function(n){return!!n},this.validUUID=function(n){return!!n},this.validateIP=function(n){return new Promise(function(e,t){(new u.default).getWhitelistedDomains().then(function(t){throw t.indexOf(n)<0&&e(),new Error("Domain is whitelisted")}).catch(function(n){t(n)})})}}return i(n,[{key:"validate",value:function(n){var e=this,t=n.ip,o=n.url,i=n.uuid;return new Promise(function(n,r){if(!e.validIP(t)||!e.validURL(o)||!e.validUUID(i))throw new Error("Inputs are invalid");e.validateIP().then(function(){n()}).catch(function(n){r(n)})})}}]),n}();e.default=c},function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={redisDaoConfig:{host:"ec2-54-202-148-125.us-west-2.compute.amazonaws.com",db:1,password:"Wewillrockyou1986!"},mongoDaoConfig:{connectionString:"mongodb://jackson:Wewillrockyou1986!@ds153761-a0.mlab.com:53761,ds153761-a1.mlab.com:53761/test?replicaSet=rs-ds153761"}}},function(n,e,t){"use strict";function o(n){return n&&n.__esModule?n:{default:n}}function i(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function n(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}(),u=t(7),c=o(u),a=t(4),f=o(a),s=t(2),l=function(){function n(){i(this,n),this.redisDao=new c.default(s.redisDaoConfig),this.mongoDao=new f.default(s.mongoDaoConfig)}return r(n,[{key:"getWhitelistedDomains",value:function(){var n=this;return new Promise(function(e,t){n.redisDao.getWhitelistedDomains().then(function(n){e(n)}).catch(function(){n.mongoDao.getWhitelistedDomains().then(function(t){e(t),n.redisDao.setWhitelistedDomains(t)}).catch(function(n){t(n)})})})}}]),n}();e.default=l},function(n,e,t){"use strict";function o(n){return n&&n.__esModule?n:{default:n}}function i(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function n(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}(),u=t(0),c=o(u),a=t(6),f=o(a);c.default.Promise=Promise;var s=function(){function n(e){var t=this;i(this,n),this.connected=!1,this.ensureConnection=function(){return new Promise(function(n,o){t.connected?n():(c.default.connect(e.connectionString),t.db=c.default.connection,t.db.once("open",function(){t.connected=!0,n()}),t.db.on("error",function(n){o(n)}))})}}return r(n,[{key:"getWhitelistedDomains",value:function(){var n=this;return new Promise(function(e,t){n.ensureConnection().then(f.default).then(function(n){e(n)}).catch(function(n){t(n)})})}}]),n}();e.default=s},function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=t(0),i=function(n){return n&&n.__esModule?n:{default:n}}(o),r=i.default.Schema,u=new r({name:String,created_on:Date}),c=i.default.model("whitelisted_domain",u);e.default=c},function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=t(5),i=function(n){return n&&n.__esModule?n:{default:n}}(o);e.default=function(){return i.default.find({})}},function(n,e,t){"use strict";function o(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function n(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}(),r=t(9),u=function(n){return n&&n.__esModule?n:{default:n}}(r),c=function(){function n(e){var t=this;o(this,n),this.connected=!1,this.ensureConnection=function(){return new Promise(function(n,o){t.connected?n():(t.db=u.default.createClient(e),t.db.on("ready",function(){t.connected=!0,n()}),t.db.on("error",function(n){o(n)}))})}}return i(n,[{key:"getWhitelistedDomains",value:function(){var n=this;return new Promise(function(e,t){n.ensureConnection().then(function(){n.db.get("whitelistedDomains",function(n,o){n?t(n):e(o)})}).catch(function(n){t(n)})})}},{key:"setWhitelistedDomains",value:function(n){var e=this;return new Promise(function(t,o){e.ensureConnection().then(function(){e.db.set("whitelistedDomains",n),t()}).catch(function(n){o(n)})})}}]),n}();e.default=c},function(n,e,t){"use strict";function o(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function n(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}(),r=t(1),u=function(n){return n&&n.__esModule?n:{default:n}}(r),c=function(){function n(){o(this,n)}return i(n,null,[{key:"processRequest",value:function(n){return new Promise(function(e,t){(new u.default).validate(n).then(function(){e()}).catch(function(){t()})})}}]),n}();e.default=c},function(n,e){n.exports=require("redis")}]);